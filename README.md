# Core Service — Digital Marketplace

Микросервис основной бизнес-логики цифрового маркетплейса

---

## Описание

**Core Service** — это ключевой компонент микросервисной архитектуры цифрового маркетплейса. Отвечает за:

- управление товарами (добавление, продажа, снятие с продажи, хранение статусов),
- ведение корзины пользователя,
- учет истории покупок и продаж,
- работу с пользовательским профилем,
- интеграцию с сервисом оплаты, авторизации и уведомлений с помощью gRPC.

Сервис разработан на Go (Golang), для клиентских REST API использует Gin-Gonic, а для межсервисного взаимодействия — gRPC.

---

## Основные возможности

### REST API

| Метод | Путь | Назначение |
|-------|------|------------|
| GET    | /GetAllFeed           | Получение ленты товаров |
| GET    | /GetCart              | Получение содержимого корзины |
| GET    | /GetHistory           | Получение истории покупок |
| GET    | /GetMyProduct         | Получение списка своих товаров |
| GET    | /GetMyProfile         | Получение своего профиля |
| GET    | /GetProfileById       | Получение профиля другого пользователя |
| GET    | /DeliverProduct       | Заказ доставки на email |
| GET    | /GetWallet            | Получение информации о кошельке |
| GET    | /GetBalance           | Получение текущего баланса |
| POST   | /CreateProduct        | Создание нового цифрового товара |
| POST   | /SwitchProduct        | Выставление/снятие товара с продажи |
| POST   | /RemoveProductFromCart| Удаление товара из корзины |
| POST   | /AddProductToCart     | Добавление товара в корзину |
| POST   | /UpdateProfile        | Обновление информации профиля |
| POST   | /UploadProductImage   | Загрузка изображения товара |
| POST   | /BuyProduct           | Покупка товара |
| POST   | /RateProduct          | Оценка товара |
| POST   | /UpdateWallet         | Обновление информации о кошельке |

### gRPC API

Файл схемы:  
`internal/services/core_service/core_service_gen/core_service.proto`

- Вызовы для обмена данными и синхронизации с:
    - Auth Service (профили пользователей)
    - Payment Service (подтверждение оплаты, обработка заказов)
    - Notification Service (уведомления о событиях)

### Дополнительно

- Хранение всех сущностей (товары, корзина, история) в PostgreSQL с использованием внешних ключей.
- Управление статусами товаров: доступен, снят с продажи, продан.
- Безопасная обработка данных пользователей.
- Сервис масштабируем, легко расширяется для новых функций и интеграций.

---

##  Взаимодействие с другими сервисами

- **Auth Service**: синхронизация аккаунта и профиля.
- **Payment Service**: подтверждение покупок, получение статуса оплат.
- **Notification Service**: рассылка уведомлений о покупках, доставках и сбросах пароля через gRPC.

---

## Технологии

- Go (Golang)
- Gin-Gonic (REST API)
- gRPC (межсервисное взаимодействие)
- PostgreSQL (БД)
- CORS и другие middleware для безопасности

